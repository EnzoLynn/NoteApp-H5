"use strict";define(function(require,exports,module){function ShareHelper(){this.shares=null,this.bhref=!1,this.Intent=null,this.File=null,this.Uri=null,this.pic=null,this.main=null,this.msg=null}var merge=require("js/lib/merge.js");ShareHelper.prototype.Init=function(){var me=this;mui.plusReady(function(){me.updateSerivces(),me.initAndroidDev()})},ShareHelper.prototype.updateSerivces=function(){var me=this;plus.share.getServices(function(s){me.shares={};for(var i in s){var t=s[i];me.shares[t.id]=t}},function(e){alert("获取分享服务列表失败："+e.message)})},ShareHelper.prototype.initAndroidDev=function(){var me=this;"Android"==plus.os.name&&(me.Intent=plus.android.importClass("android.content.Intent"),me.File=plus.android.importClass("java.io.File"),me.Uri=plus.android.importClass("android.net.Uri"),me.main=plus.android.runtimeMainActivity())},ShareHelper.prototype.shareShow=function(){var me=this,ids=[{id:"weixin",ex:"WXSceneSession"},{id:"weixin",ex:"WXSceneTimeline"}],bts=[{title:"发送给微信好友"},{title:"分享到微信朋友圈"}];"iOS"==plus.os.name&&(ids.push({id:"qq"}),bts.push({title:"分享到QQ"})),plus.nativeUI.actionSheet({cancel:"取消",buttons:bts},function(e){var i=e.index;i>0&&me.shareAction(ids[i-1].id,ids[i-1].ex)})},ShareHelper.prototype.shareAction=function(id,ex){var me=this,s=null;return id&&(s=me.shares[id])?void(s.authenticated?me.shareMessage(s,ex):s.authorize(function(){me.shareMessage(s,ex)},function(e){alert("认证授权失败："+e.code+" - "+e.message)})):void alert("无效的分享服务！")},ShareHelper.prototype.shareMessage=function(s,ex){var me=this,msg={content:"这是一个非常好用的东东,随手记",extra:{scene:ex}};me.bhref?(msg.href="https://github.com/EnzoLynn",msg.title="好用的App",msg.content="我正在使用NoteApp随手记，赶紧跟我一起来体验！",msg.thumbs=["./dist/image/4-108.png"]):me.pic&&me.pic.realUrl&&(msg.pictures=[me.pic.realUrl]),msg=merge(msg,me.msg),s.send(msg,function(){alert('分享到"'+s.description+'"成功！ ')},function(e){alert('分享到"'+s.description+'"失败: '+e.code+" - "+e.message)})},ShareHelper.prototype.shareCameraPicture=function(){var me=this,cmr=plus.camera.getCamera();cmr.captureImage(function(p){plus.io.resolveLocalFileSystemURL(p,function(entry){me.pic.src=entry.toLocalURL(),me.pic.realUrl=p},function(e){alert("读取拍照文件错误："+e.message)})},function(e){alert("拍照失败："+e.message)})},ShareHelper.prototype.shareGalleryPicture=function(){var me=this;plus.gallery.pick(function(p){me.pic.src=p,me.pic.realUrl=me.pic.src},function(e){alert("读取照片失败："+e.message)})},ShareHelper.prototype.shareLogoPicture=function(){var me=this,url="./dist/image/4-108.png";plus.io.resolveLocalFileSystemURL(url,function(entry){me.pic.src=entry.toLocalURL(),me.pic.realUrl=url},function(e){alert("读取Logo文件错误："+e.message)})},module.exports=ShareHelper});
//# sourceMappingURL=ShareHelper.js.map