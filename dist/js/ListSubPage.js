"use strict";define(function(require,exports,module){require("jquery");mui.plusReady(function(){ReactDOM.render(React.createElement(ListSubPage,null),mui(".subpageContainer")[0])});var NoteRow=React.createClass({displayName:"NoteRow",delNote:function(e,key){e.stopPropagation();var me=this,li=me.refs.muiLi;setTimeout(function(){mui.swipeoutClose(li)},0),plus.storage.removeItem(key),me.props.afterdel1()},editNote:function(e,key){e.stopPropagation();var val=plus.storage.getItem(key);null==val&&(val="");var ws=mui.openWindow({url:"addNoteWindow.html",id:"addNoteWindow",styles:{top:0,bottom:0,width:"100%",height:"100%",hardwareAccelerated:!0},extras:{},createNew:!1,show:{autoShow:!0,aniShow:"slide-in-right",duration:100},waiting:{autoShow:!0,title:"正在加载...",options:{}}});ws&&ws.evalJS("PushValue('"+key+"','"+val+"')")},render:function(){var _this=this,note=this.props.note;null==note.val&&(note.val="");var val=note.val.length>25?note.val.substring(0,25)+"...":note.val;return React.createElement("li",{ref:"muiLi",className:"mui-table-view-cell listCell"},React.createElement("div",{className:"mui-slider-right mui-disabled "},React.createElement("a",{className:"mui-btn mui-btn-red",onClick:function(e){return _this.delNote(e,note.key)}},"删除")),React.createElement("div",{className:"mui-slider-handle",onClick:function(e){return _this.editNote(e,note.key)}},React.createElement("a",{className:"mui-navigate-right"},val)))}});window.getNoteList=function(scope){for(var me=scope,keyNames=[],values=[],numKeys=plus.storage.getLength(),notes=[],i=0;numKeys>i;i++){var key=keyNames[i]=plus.storage.key(i),val=values[i]=plus.storage.getItem(keyNames[i]);""==val&&(val="ww"),notes.push({key:key,val:val})}notes.sort(function(a,b){var kA=a.key,kB=b.key;return kB>kA?1:-1}),me.setState({notes:notes})};var ListSubPage=React.createClass({displayName:"ListSubPage",pulldownRefresh:function(){var me=this;document.body.querySelector(".mui-table-view"),document.body.querySelectorAll(".mui-table-view-cell");me.getList(),mui("#pullrefresh").pullRefresh().endPulldownToRefresh(),mui("#pullrefresh").pullRefresh().refresh(!0)},pullupRefresh:function(){var me=this,numKeys=plus.storage.getLength(),cells=(document.body.querySelector(".mui-table-view"),document.body.querySelectorAll(".mui-table-view-cell"));mui("#pullrefresh").pullRefresh().endPullupToRefresh(cells.length>=numKeys),me.getList()},getList:function(){var me=this;window.getNoteList(me)},componentDidMount:function(){var me=this;window.scope=me,mui.init({pullRefresh:{container:"#pullrefresh",down:{contentdown:"下拉可以刷新",contentover:"释放立即刷新",contentrefresh:"正在刷新...",callback:me.pulldownRefresh},up:{contentdown:"上拉可以加载",contentover:"释放立即加载",contentrefresh:"正在加载...",callback:me.pullupRefresh}}}),window.getNoteList(me)},getInitialState:function(){return{notes:[]}},render:function(){var me=this,notes=[];return this.state.notes.forEach(function(note,index){notes.push(React.createElement(NoteRow,{note:note,afterdel1:me.getList}))}),React.createElement("div",null,React.createElement("div",{id:"pullrefresh",className:"mui-content mui-scroll-wrapper"},React.createElement("div",{className:"mui-scroll"},React.createElement("ul",{className:"mui-table-view"},notes))))}})});
//# sourceMappingURL=ListSubPage.js.map